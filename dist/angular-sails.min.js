!function(n,r){"use strict";n.module("ngSails",["ng"]),n.module("ngSails").provider("$sails",function(){var t=this,e=["get","post","put","delete"],o=["on","once"];this.url=void 0;var i=this.interceptors=[],s=this.responseInterceptors=[];this.$get=["$q","$timeout","$injector",function(u,c,f){var a=[];n.forEach(i,function(r){a.unshift(n.isString(r)?f.get(r):f.invoke(r))}),n.forEach(s,function(r,t){var e=n.isString(r)?f.get(r):f.invoke(r);a.splice(t,0,{response:function(n){return e(u.when(n))},responseError:function(n){return e(u.reject(n))}})});var l=r.connect(t.url),h=function(n,r){c(function(){n(r)})},g=function(r){l["legacy_"+r]=l[r],l[r]=function(t,e,o){function i(t){var e=u.defer();return l["legacy_"+r](t.url,t.data,function(r){r&&n.isObject(r)&&r.status&&2!==Math.floor(r.status/100)?e.reject(r):e.resolve(r)}),e.promise}void 0===o&&n.isFunction(e)&&(o=e,e=null);var s=[i,void 0],c=u.when({url:t,data:e,cb:o});for(n.forEach(a,function(n){(n.request||n.requestError)&&s.unshift(n.request,n.requestError),(n.response||n.responseError)&&s.push(n.response,n.responseError)});s.length;){var f=s.shift(),h=s.shift();c=c.then(f,h)}return c.then(o,null),c.success=function(n){return c.then(n),c},c.error=function(n){return c.then(null,n),c},c}},p=function(r){l["legacy_"+r]=l[r],l[r]=function(t,e){null!==e&&n.isFunction(e)&&l["legacy_"+r](t,function(n){h(e,n)})}};return n.forEach(e,g),n.forEach(o,p),l}]})}(angular,io);